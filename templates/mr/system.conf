{% if not mgmt_ip is defined or mgmt_ip|length == 1 %}
host-name {{ hostname.split('.')[0] }};
{% endif %}
domain-name {{ ".".join(hostname.split('.')[1:]) }};
time-zone UTC;
replace: root-authentication {
    encrypted-password "***REMOVED***"; ## SECRET-DATA
}
replace: name-server {
    208.80.154.254;
    208.80.153.254;
    91.198.174.216;
}
replace: login {
    retry-options {
        tries-before-disconnect 5;
        backoff-threshold 1;
        backoff-factor 10;
    }
    {% macro login() %}{% include "includes/system/login.conf" %}{% endmacro %}
    {{ login()|indent(4) }}
}
  services {
    replace: ssh {
        root-login deny;
        protocol-version v2;
        ciphers [ aes128-ctr aes192-ctr aes256-ctr ];
        macs [ hmac-sha2-256 hmac-sha2-512 ];
        key-exchange group-exchange-sha2;
        hostkey-algorithm {
            no-ssh-dss;
        }
    }
}

replace: syslog {
    user * {
        any emergency;
    }
    file messages {
        any notice;
        authorization info;
    }
    host librenms.wikimedia.org {
        any any;
    }
}
max-configurations-on-flash 5;
max-configuration-rollbacks 5;
replace: ntp {
    server 208.80.154.157;
    server 208.80.154.50;
    server 208.80.153.12;
    server 208.80.153.42;
    server 91.198.174.106;
    server 91.198.174.122;
}
